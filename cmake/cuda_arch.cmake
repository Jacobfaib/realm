
function(get_cuda_arch OUTPUT_VARIABLE)
 set(ARCH)
 # Prior to 11.5, we don't have -arch=all and have to list the architectures out manually
 if (${CUDA_VERSION_STRING} VERSION_GREATER_EQUAL "3.2" AND ${CUDA_VERSION_STRING} VERSION_LESS "10.0")
   list(APPEND ARCH 20)
 endif ()
 if (${CUDA_VERSION_STRING} VERSION_GREATER_EQUAL "5.0" AND ${CUDA_VERSION_STRING} VERSION_LESS "11.0")
   list(APPEND ARCH 30)
 endif ()
 if (${CUDA_VERSION_STRING} VERSION_GREATER_EQUAL "5.0" AND ${CUDA_VERSION_STRING} VERSION_LESS "12.0")
   list(APPEND ARCH 35)
 endif ()
 if (${CUDA_VERSION_STRING} VERSION_GREATER_EQUAL "6.0" AND ${CUDA_VERSION_STRING} VERSION_LESS "12.0")
   list(APPEND ARCH 50)
 endif ()
 if (${CUDA_VERSION_STRING} VERSION_GREATER_EQUAL "8.0")
   list(APPEND ARCH 60)
 endif ()
 if (${CUDA_VERSION_STRING} VERSION_GREATER_EQUAL "9.0")
   list(APPEND ARCH 70)
 endif ()
 if (${CUDA_VERSION_STRING} VERSION_GREATER_EQUAL "11.0")
   list(APPEND ARCH 80)
 endif ()
 set(${OUTPUT_VARIABLE} ${ARCH} PARENT_SCOPE)
endfunction(get_cuda_arch)
